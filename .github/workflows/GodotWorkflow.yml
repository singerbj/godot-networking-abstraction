name: "export"
on:
  workflow_dispatch:
  push:
    paths:
      - "**.gd"
      - "**.tscn"
      - "**.import"
      - "**.tres"
      - "**.ttf"
      - "**.yml"
    branches:
      - main

env:
  GODOT_VERSION: 3.5
  RELEASE: rc
  NAME: ${{ github.event.repository.name }}

jobs:
  export:
    runs-on: ubuntu-latest
    container:
      image: ghcr.io/bend-n/godot-2d:3.5.rc
    name: ${{ matrix.name }}
    strategy:
      matrix:
        include:
          - name: Windows export
            platform: windows

    steps:
      - name: Build (Windows)
        if: matrix.platform == 'windows'
        uses: bend-n/godot-actions/.github/actions/export-windows@main